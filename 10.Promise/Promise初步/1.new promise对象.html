<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise 用法</title>
</head>
<body>
    <script>
        // 1.new Promise 对象
        // console.log(Promise, typeof Promise) // 是一个构造函数
        // new Promise(); // 这样写就错了，里面要传个回调函数
        // const obj = new Promise(() => {}); 
        // console.log(obj,obj instanceof Promise)

        // 2.Promise 的状态有 3 种，一开始是 pending（未完成），执行 resolve，变成 fullfilled（resolved）
        // 执行 reject，变成 rejected，已失败，并且状态一旦发生变化，就不会再改变了
        /* const p = new Promise((resolve, reject) => {
            reject() // Promise {<rejected>: undefined}，并且报错
            resolve() // Promise {<fulfilled>: undefined}
        });  */
        // console.log(p) // Promise {<pending>}，默认

        // 3.then() 方法
        /* p.then(
            () => {
                // 执行 resolve，变成 fullfilled（resolved）的时候执行
                console.log("success")
            },
            () => {
                // 执行 reject，变成 rejected 的时候执行
                console.log("error")
            }
        ) */

        // 4.resolve 和 reject 的参数
        const p = new Promise((resolve, reject) => {
            console.log(resolve) // resolve 和 reject 也是函数
            // reject("失败了")
            // reject 里面可以传错误对象
            resolve("sucsess")
            reject(new Error("失败了================"))
        })
        console.log(p)
        console.log(p.message)

        /* p.then(
            data => console.log(data),
            // error => console.log(error.message) // 打印错误信息
            error => console.log(error)
        ) */
    </script>
</body>
</html>